<% /* eslint-disable */ %>
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Behavioral Interview Questions</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <%- include('partials/navbar') %>
  <h1>Behavioral Interview Questions</h1>

  <ul>
    <% questions.forEach(q => { %>
      <li style="margin-bottom: 30px;">
        <strong>Q:</strong> <%= q.question %><br>

        <!-- answer textarea -->
        <textarea 
          rows="3" 
          placeholder="Type your answer here..." 
          class="answer-box" 
          data-id="<%= q.id %>"></textarea>
        <br>

        <button onclick="saveAnswer(<%= q.id %>)">Save Answer</button>
      </li>
    <% }) %>
  </ul>

  <a href="/" style="display: block; margin-top: 40px;">â¬… back to home</a>

  <script>
    // run when the page loads
    window.onload = () => {
      // apply saved theme
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
      }

      // load saved answers
      document.querySelectorAll('.answer-box').forEach(textarea => {
        const id = textarea.dataset.id;
        textarea.value = localStorage.getItem('behavioral-answer-' + id) || '';
      });
    };

    // save typed answer
    function saveAnswer(id) {
      const value = document.querySelector(`textarea[data-id="${id}"]`).value;
      localStorage.setItem('behavioral-answer-' + id, value);
      alert('Saved!');
    }

    // theme toggle (already used by navbar)
    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
    }
  </script>
</body>
</html>
